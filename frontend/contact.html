<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>GHPS Kambipura</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="chatbot.css">

</head>

<body>

    <header class="navbar">
        <div class="nav-container">

            <!-- LOGO -->
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="logo-text">
                    <h3>GHPS Kambipura</h3>
                </div>
            </div>

            <!-- HAMBURGER -->
            <div class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </div>

            <!-- NAV MENU -->
            <nav id="navMenu">
                <a class="active" href="index.html">Home</a>
                <a href="about.html">About</a>
                <a href="facilities.html">Facilities</a>
                <a href="schemes.html">Schemes</a>
                <a href="gallery.html">Gallery</a>
                <a href="contact.html">Contact</a>
            </nav>

        </div>
    </header>

    <main class="main">

        <section class="left">
            <div class="card">
                <h2>Get in Touch</h2>

                <div class="info">
                    <div class="icon blue"><i class="fa-solid fa-location-dot"></i></div>
                    <div>
                        <h4>Visit Us</h4>
                        <p>
                            Government Higher Primary School,<br>
                            Kambipura, Bengaluru, 560074
                        </p>
                    </div>
                </div>

                <div class="info">
                    <div class="icon green"><i class="fa-solid fa-phone"></i></div>
                    <div>
                        <h4>Call Us</h4>
                        <p>+91 9620404689</p>
                    </div>
                </div>

                <div class="info">
                    <div class="icon orange"><i class="fa-solid fa-envelope"></i></div>
                    <div>
                        <h4>Email Us</h4>
                        <p>kambipuraghpskambipura@gmail.com</p>
                    </div>
                </div>

            </div>

            <div class="admission">
                <h3>Admissions Open</h3>
                <p>Admissions are open for Grade 1 to Grade 7.</p>
                <button id="enquireBtn">Enquire Now</button>
            </div>
        </section>

        <section class="right">
            <div class="map">
                <iframe
                    src="https://www.google.com/maps?q=12.872078162633832,77.46190587861561&z=19&output=embed"></iframe>
            </div>
        </section>

    </main>

    <!-- ================= ENQUIRY POPUP ================= -->

    <div id="enquiryPopup" class="popup">
        <div class="popup-box">
            <span id="closePopup">&times;</span>
            <h2>Admission Enquiry</h2>

            <form id="enquiryForm">

                <input type="text" name="parent_name" placeholder="Parent Name" required>

                <input type="text" name="student_name" placeholder="Student Name" required>

                <input type="tel" name="phone" placeholder="Phone Number" required>

                <input type="text" name="class_interest" placeholder="Class Interested" required>

                <textarea name="message" placeholder="Your Message"></textarea>

                <button type="submit" class="submit-btn">Submit</button>

            </form>
        </div>
    </div>

    <!-- ================= SUCCESS POPUP ================= -->

    <div id="successPopup" class="popup">
        <div class="success-box">

            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>

            <h2>Enquiry Submitted!</h2>
            <p>Thank you for contacting GHPS Kambipura.<br>We will reach out to you soon.</p>

            <button id="closeSuccess" class="success-btn">
                Done
            </button>

        </div>
    </div>
    <!-- ================= CHATBOT ================= -->

    <!-- Chatbot Logo -->
    <div id="chat-logo">
        <img src="images/Chatbot.jpg" alt="School Logo">
    </div>

    <!-- Chat Window -->
    <div id="chat-container">

        <div id="chat-header">
            üéì School AI Assistant
            <span id="chat-close">‚úñ</span>
        </div>

        <div id="chat-messages">
            <div class="bot-message">
                Hello üëã<br>
                Welcome to Government Higher Primary School, Kambipura.<br>
                How can I help you?
            </div>
        </div>

        <div id="chat-input-area">
            <div id="chat-input-row">
                <input type="text" id="chat-input" placeholder="Ask anything about school...">
                <button id="chat-send">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>

    </div>
    <script>

        // ================= ENQUIRY POPUP =================

        document.getElementById("enquireBtn").onclick = function () {
            document.getElementById("enquiryPopup").style.display = "flex";
        }

        document.getElementById("closePopup").onclick = function () {
            document.getElementById("enquiryPopup").style.display = "none";
        }

        document.getElementById("closeSuccess").onclick = function () {
            document.getElementById("successPopup").style.display = "none";
        }


        // ================= ENQUIRY SUBMIT =================

        document.getElementById("enquiryForm").addEventListener("submit", async function (e) {

            e.preventDefault();

            const parent_name = this.parent_name.value;
            const student_name = this.student_name.value;
            const phone = this.phone.value;
            const class_interest = this.class_interest.value;
            const message = this.message.value;

            try {

                const response = await fetch("https://ghpskambipura.onrender.com/submit-enquiry", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        parent_name,
                        student_name,
                        phone,
                        class_interest,
                        message
                    })
                });

                const result = await response.json();

                if (result.status === "success") {

                    document.getElementById("enquiryPopup").style.display = "none";
                    document.getElementById("successPopup").style.display = "flex";
                    this.reset();

                } else {
                    alert("Submission failed ‚ùå");
                }

            } catch (error) {
                alert("Server not responding ‚ùå");
                console.error(error);
            }

        });


        // ================= MOBILE MENU =================

        document.addEventListener("DOMContentLoaded", function () {

            const menuToggle = document.getElementById("menuToggle");
            const navMenu = document.getElementById("navMenu");

            if (menuToggle) {
                menuToggle.addEventListener("click", function () {
                    navMenu.classList.toggle("active");
                });
            }

        });

    </script>

    <script src="chatbot.js"></script>
</body>
<!-- Footer -->
<div id="footer"></div>
<script src="include.js"></script>

</html>